{% extends "frontend/base.html" %}
{% block content %}                    
<div class="page-wrapper-row full-height">
    <div class="page-wrapper-middle">
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <!-- BEGIN PAGE HEAD-->
                <div class="page-head">
                    <div class="container">
                        <!-- BEGIN PAGE TITLE -->
                        <div class="page-title">
                            <h1>Panorama General de la UNAG
                                <!-- <small>dashboard & statistics</small> -->
                            </h1>
                        </div>
                    </div>
                </div>
                <!-- END PAGE HEAD-->
                <!-- BEGIN PAGE CONTENT BODY -->
                <div class="page-content">
                    <div class="container">
                        <!-- BEGIN PAGE BREADCRUMBS -->
                        <ul class="page-breadcrumb breadcrumb">
                            <li>
                                <a href="index.html">Inicio</a>
                                <!--<i class="fa fa-circle"></i>-->
                            </li>
                            <!--<li>
                                <span>Dashboard</span>
                            </li>-->
                        </ul>
                        <!-- END PAGE BREADCRUMBS -->
                        <!-- BEGIN PAGE CONTENT INNER -->
                        <div class="page-content-inner">
                            <div class="mt-content-body">
                                <div class="row">
                                    
                                    <div class="col-md-6 col-sm-6">
                                        <div class="portlet light ">
                                            <div class="portlet-title">
                                                <div class="caption caption-md">
                                                    <i class="icon-bar-chart font-dark hide"></i>
                                                    <span class="caption-subject font-green-steel bold uppercase">Afiliados y Afiliadas</span>
                                                    <span class="caption-helper"></span>
                                                </div>
                                            
                                            </div>
                                            <div class="portlet-body">
                                                <div class="row">
                                                    <div class="col-md-4 col-sm-4 col-xs-6">
                                                        <div class="font-grey-mint font-sm"> Total</div>
                                                        <div class="uppercase font-hg font-red-flamingo">
                                                        <span aria-hidden="true" class="icon-users"></span>
                                                        {{total}}
                                                        
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 col-sm-4 col-xs-6">
                                                        <div class="font-grey-mint font-sm"> Hombres </div>
                                                        <div class="uppercase font-hg theme-font">
                                                            <span aria-hidden="true" class="icon-user"></span>
                                                            {{hombres}}
                                                            
                                                        </div>
                                                    </div>
                                                    <div class="col-md-4 col-sm-4 col-xs-6">
                                                        <div class="font-grey-mint font-sm"> Mujeres </div>
                                                        <div class="uppercase font-hg font-purple">
                                                            <span aria-hidden="true" class="icon-user-female"></span>
                                                            {{mujeres}}
                                                        </div>
                                                    </div>
                                                    <div class="map">
                                                        <div id="map-canvas" style="width:100%; height:400px"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                               

                                </div>
                            </div>
                        </div>
                        <!-- END PAGE CONTENT INNER -->
                    </div>
                </div>
                <!-- END PAGE CONTENT BODY -->
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
        </div>
        <!-- END CONTAINER -->
    </div>
</div>   
{% endblock content %}

{% block extra_js %}
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAqZIKGS4tX1I2OrDtuCN-wSPVaPLS9UjU" type="text/javascript"></script>
<script type="text/javascript" src="/static/js/markerclusterer.js"></script>
<script>


    var markers = [];
    function initialize()
    {
        var infowindow = new google.maps.InfoWindow();
        var myLatlng = new google.maps.LatLng(13,-85);
        var myOptions = {
            zoom: 7,
            center: myLatlng,
        }

        var map = new google.maps.Map(document.getElementById('map-canvas'), myOptions);
        var bounds = new google.maps.LatLngBounds();
        var infowindow = new google.maps.InfoWindow();


        $.getJSON("{% url 'obtener-lista' %}", function(data){
            $.each(data, function(i, elemento){
                var latlng = new google.maps.LatLng(elemento.lat, elemento.lon);
                bounds.extend(latlng);
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    title: elemento.nombre,
                    // icon: image,
                    item: '',
                    id: elemento.id
                });
                markers.push(marker);

                // google.maps.event.addListener(marker, 'click', (function(mm, tt) {
                //     return function() {
                //         infowindow.setContent(tt);
                //         infowindow.open(map, mm);
                //     }
                // })(marker, elemento.nombre));

            });
            var markerCluster = new MarkerClusterer(map, markers);

        });

        //map.fitBounds(bounds);
    }

    google.maps.event.addDomListener(window, 'load', initialize);
</script>
    <script type="text/javascript">
        $( ".hor-menu ul li" ).removeClass( "active" );
        $( ".hor-menu ul li.inicio" ).addClass( "active" );
    </script>
{% endblock extra_js %}


